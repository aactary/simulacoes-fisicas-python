{% extends 'manu/base.html' %}
{% load static %}

{% block title %}{{ simulation.title }} - Simulações Físicas com Python{% endblock %}

{% block extra_css %}
<style>
    .simulation-controls {
        position: sticky;
        top: 120px;
        z-index: 100;
    }
    
    .parameter-slider {
        margin-bottom: 1rem;
    }
    
    .parameter-value {
        font-weight: 600;
        color: var(--primary-blue);
    }
    
    .simulation-running {
        border: 2px solid var(--accent-green);
        box-shadow: 0 0 20px rgba(5, 150, 105, 0.3);
    }
    
    .code-tabs .nav-link {
        color: var(--gray-600);
        border: none;
        background: var(--gray-100);
        margin-right: 0.25rem;
        border-radius: 0.5rem 0.5rem 0 0;
    }
    
    .code-tabs .nav-link.active {
        background: var(--gray-900);
        color: white;
    }
    
    .formula-container {
        background: linear-gradient(135deg, rgba(37, 99, 235, 0.05) 0%, rgba(255, 255, 255, 1) 100%);
        border: 2px solid rgba(37, 99, 235, 0.1);
        border-radius: 1rem;
        padding: 2rem;
        margin: 1rem 0;
    }
    
    .lesson-objective {
        background: linear-gradient(135deg, rgba(5, 150, 105, 0.1) 0%, rgba(255, 255, 255, 1) 100%);
        border-left: 4px solid var(--accent-green);
        padding: 1rem;
        margin-bottom: 1rem;
        border-radius: 0 0.5rem 0.5rem 0;
    }
</style>
{% endblock %}

{% block content %}
<!-- Header da Simulação -->
<div class="simulation-header">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg">
                <nav aria-label="breadcrumb" class="mb-3">
                    <ol class="breadcrumb text-white-50">
                        <li class="breadcrumb-item">
                            <a href="{% url 'simulacoes:index' %}" class="text-white-50 text-decoration-none">
                                <i class="bi bi-house me-1"></i>Início
                            </a>
                        </li>
                        <li class="breadcrumb-item active text-white" aria-current="page">
                            {{ simulation.category|default:"Mecânica" }}
                        </li>
                    </ol>
                </nav>
                <h1 class="display-5 fw-bold mb-3">
                    <i class="bi bi-{{ simulation.icon }} me-3"></i>
                    {{ simulation.title|default:"" }}
                </h1>
                <p class="lead mb-0">
                    {{ simulation.description|default:"" }}
                </p>
            </div>
            <!-- <div class="col-lg-4 text-lg-end">
                <div class="simulation-status bg-dark bg-opacity-20 rounded-3 p-3">
                    <div class="d-flex align-items-center justify-content-center">
                        <div class="status-indicator bg-success rounded-circle me-2" style="width: 12px; height: 12px;"></div>
                        <span class="fw-semibold">Simulação Ativa</span>
                    </div>
                    <small class="d-block mt-1 opacity-75">
                        Última atualização: {{ simulation.updated_at|default:"15/01/2024" }}
                    </small>
                </div>
            </div> -->
        </div>
    </div>
</div>

<div class="container py-5">
    <div class="row">
        <!-- Coluna Principal - Simulação e Visualização -->
        <div class="col-lg">
            <!-- Controles da Simulação -->
            <div class="simulation-section mb-4">
                <h3>
                    <i class="bi bi-sliders"></i>
                    Parâmetros da Simulação
                </h3>
                <div class="parameters-form">
                    
                    <form method="get" class="row g-3 align-items-end">
                        <div class="row">
                            <div class="col-md">
                                <label for="massa" class="form-label">Massa da água (g)</label>
                                <input type="number" class="form-control" id="massa" name="massa" step="10" value="{{ massa }}">
                            </div>
                            <div class="col-md">
                                <label for="temp_inicial" class="form-label">Temperatura Inicial (°C)</label>
                                <input type="number" class="form-control" id="temp_inicial" name="temp_inicial" step="1" value="{{ temp_inicial }}">
                            </div>
                            <div class="col-md">
                                <label for="temp_final" class="form-label">Temperatura Final (°C)</label>
                                <input type="number" class="form-control" id="temp_final" name="temp_final" step="1" value="{{ temp_final }}">
                            </div>
                        </div>

                        <div class="row mt-3">
                            <div class="col-12">
                                <div class="d-flex gap-3">
                                    <button type="submit" class="btn btn-simulate" id="startSimulation">
                                        <i class="bi bi-play-fill me-2"></i>
                                        Iniciar Simulação
                                    </button>
                                    <button type="button" class="btn btn-outline-secondary" disabled id="pauseSimulation">
                                        <i class="bi bi-pause-fill me-2"></i>
                                        Pausar
                                    </button>
                                    <button type="button" class="btn btn-outline-danger" disabled id="resetSimulation">
                                        <i class="bi bi-arrow-clockwise me-2"></i>
                                        Reiniciar
                                    </button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Área de Visualização -->
            <div class="simulation-section mb-4">
                <h3>
                    <i class="bi bi-graph-up"></i>
                    Visualização da Simulação
                </h3>
                <div class="row">
                    <div class="col-12">
                        <!-- Animação do Movimento -->
                        <div class="visualization-area mb-4" id="animationArea">
                            {% if imagem_grafico %}
                            <!-- {{imagem_grafico|safe}} -->
                            <img src="data:image/png;base64,{{ imagem_grafico }}" alt="Gráfico da Curva de Aquecimento" class="img-fluid rounded shadow">
                            {% else %}
                            <div class="text-center">
                                <i class="bi bi-play-circle fs-1 text-muted mb-3"></i>
                                <h5 class="text-muted">Clique em "Iniciar Simulação" para visualizar o movimento</h5>
                                <p class="text-muted">A animação mostrará o objeto em movimento retilíneo uniforme</p>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>

                
                <!-- Dados em Tempo Real -->
                <div class="real-time-data bg-light rounded-3 p-3">
                    <h6 class="mb-3">
                        <i class="bi bi-speedometer2 me-2"></i>
                        Dados da Simulação
                    </h6>
                    <div class="row text-center">
                        <div class="col-md">
                            <div class="data-item">
                                <div class="data-value fs-4 fw-bold text-primary" id="currentTime">{{massa}} g</div>
                                <div class="data-label text-muted">Massa</div>
                            </div>
                        </div>
                        <div class="col-md">
                            <div class="data-item">
                                <div class="data-value fs-4 fw-bold text-success" id="currentPosition">{{temp_inicial}} ºC</div>
                                <div class="data-label text-muted">Temperatura Inicial</div>
                            </div>
                        </div>
                        <div class="col-md">
                            <div class="data-item">
                                <div class="data-value fs-4 fw-bold text-danger" id="currentVelocity">{{temp_final}} ºC</div>
                                <div class="data-label text-muted">Temperatura Final</div>
                            </div>
                        </div>
                        <div class="col-md">
                            <div class="data-item">
                                <div class="data-value fs-4 fw-bold text-warning" id="currentDistance">{{energia_total}} J</div>
                                <div class="data-label text-muted">Energia Total</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Fórmulas Matemáticas -->
            <div class="simulation-section mb-4">
                <h3>
                    <i class="bi bi-calculator"></i>
                    Fórmulas Matemáticas
                </h3>
                <div class="formula-container">
                    <!-- <h5 class="text-center mb-4 text-primary">Movimento Retilíneo Uniforme</h5> -->
                    
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="formula-block mb-3">
                                <h6 class="text-center mb-2">Calor Sensível $Q$</h6>
                                <div class="formula-math text-center">
                                    $$ Q = m \cdot c \cdot \Delta T $$
                                </div>
                                <small class="text-muted d-block text-center mt-2">
                                    Onde: <br>
                                    $Q$ = Calor Sensível $(J)$ <br>
                                    $m$ massa $(g)$, $c$ = calor específico $(J/ºC)$ <br>
                                    $\Delta T$ = variação de temperatura $(ºC)$
                                </small>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="formula-block mb-3">
                                <h6 class="text-center mb-2">Alcance $R$</h6>
                                <div class="formula-math text-center">
                                    $$Q = m \cdot L $$
                                </div>
                                <small class="text-muted d-block text-center mt-2">
                                    Onde: <br>
                                    $Q$ = Calor Sensível $(J)$ <br>
                                    $m$ massa $(g)$ <br>
                                    $L$ = calor latente específico $(J/g)$
                                </small>
                            </div>
                        </div>
                    </div>
                    
                </div>
            </div>

            <!-- Código da Aplicação -->
            <div class="simulation-section mb-4">
                <h3>
                    <i class="bi bi-code-slash"></i>
                    Anexos
                </h3>
                <div class="code-section">
                    <ul class="nav nav-tabs" id="codeTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="python-tab" data-bs-toggle="tab" data-bs-target="#python-code" type="button" role="tab">
                                <i class="bi bi-file-code me-1"></i>
                                Plano de Aula
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="javascript-tab" data-bs-toggle="tab" data-bs-target="#javascript-code" type="button" role="tab">
                                <i class="bi bi-filetype-py me-1"></i>
                                Código Fonte
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="html-tab" data-bs-toggle="tab" data-bs-target="#html-code" type="button" role="tab">
                                <i class="bi bi-filetype-html me-1"></i>
                                Exercícios
                            </button>
                        </li>
                    </ul>
                    <div class="tab-content" id="codeTabsContent">
                        <div class="tab-pane fade show active" id="python-code" role="tabpanel">
                            <div class="mt-4">
                                <!--  -->
                                <h4><i class="bi bi-pin-angle-fill"></i> Proposta de Plano de Aula: Curva de Aquecimento da Água</h4>

                                <h5>1. Identificação:</h5>
                                <ul>
                                    <li><strong>Nível de Ensino:</strong> Médio</li>
                                    <li><strong>Instituição:</strong> [A ser preenchido]</li>
                                    <li><strong>Natureza:</strong> Aula Regular</li>
                                    <li><strong>Docente Responsável:</strong> [A ser preenchido]</li>
                                    <li><strong>Modalidade:</strong> Presencial</li>
                                    <li><strong>Área do Conhecimento:</strong> Física</li>
                                    <li><strong>Tema da Aula:</strong> Calorimetria</li>
                                    <li><strong>Título da Aula:</strong>  Visualizando a Mudança de Fase: Análise da Curva de Aquecimento da Água com Python</li>
                                    <li><strong>Tipo Predominante:</strong> Experimental com Simulações</li>
                                    <li><strong>Duração prevista:</strong> 45 minutos</li>
                                </ul>

                                <h5>2. Problema</h5>
                                <p>Como podemos visualizar e diferenciar o que acontece com a temperatura da água enquanto ela recebe calor continuamente, desde o estado sólido (gelo) até o estado gasoso (vapor)? Por que a temperatura para de subir em certos momentos, mesmo que continuemos a fornecer energia?</p>

                                <h5>3. Objetivo Principal</h5>
                                <p>
                                    Analisar e interpretar o gráfico da curva de aquecimento da água, gerado por uma simulação computacional, para diferenciar e compreender os conceitos de calor sensível (variação de temperatura) e calor latente (mudança de estado físico).
                                </p>
                                <h6>3.1. Objetivos Complementares</h6>
                                <ul>
                                    <li>Identificar os patamares de fusão e ebulição no gráfico como períodos de mudança de fase.</li>
                                    <li>Relacionar as partes inclinadas do gráfico com o aquecimento da substância em um único estado físico (sólido, líquido ou gasoso).</li>
                                    <li>Compreender que, durante a mudança de fase, a energia recebida (calor latente) é usada para reorganizar as moléculas, e não para aumentar a temperatura.</li>
                                    <li> Introduzir a noção de como simulações computacionais podem ser usadas para modelar e entender fenômenos físicos.</li>
                                </ul>

                                <h5>4. Conhecimentos Introdutórios Relevantes</h5>
                                <p>
                                    Para que os objetivos da aula sejam alcançados, é imprescindível que os alunos já tenham sido introduzidos aos seguintes conceitos:
                                </p>
                                <ul>
                                    <li>Temperatura e Calor: A diferença fundamental entre os dois conceitos.</li>
                                    <li>Estados Físicos da Matéria: Sólido, líquido e gasoso.</li>
                                    <li>Mudanças de Estado Físico: Fusão, vaporização, etc.</li>
                                    <li>Leitura de Gráficos: Habilidade básica de interpretar eixos (x, y) e a forma de uma curva.</li>
                                </ul>

                                <h5>5. Metodologia (Uso de Simulação e Programação Python)</h5>
                                <p>
                                    A aula será baseada na apresentação de uma simulação computacional desenvolvida em Python, que gera um gráfico da curva de aquecimento da água. Os alunos irão observar a simulação, interpretar os dados gerados e relacionar as fases do gráfico aos conceitos de calor sensível, calor latente e mudanças de estado físico.
                                </p>
                                <h6>5.1. Estratégias Didáticas</h6>
                                <ul>
                                    <li>Introdução (5 min): breve contextualização sobre os conceitos de calor sensível e latente e como ocorrem as mudanças de fase da água.</li>
                                    <li>Execução da Simulação (15 min): apresentação da simulação em Python com gráfico da curva de aquecimento. O professor explicará os trechos do gráfico durante a execução.</li>
                                    <li>Discussão Guiada (15 min): questionamento dos alunos sobre o que ocorre em cada trecho do gráfico; identificação coletiva dos pontos de fusão, ebulição, calor sensível e latente.</li>
                                    <li>Atividade de Fixação (10 min): os alunos responderão a um pequeno questionário em duplas, com base no gráfico apresentado.</li>
                                </ul>
                                <p class="alert alert-light">
                                    Observação: A aula poderá ocorrer em laboratório de informática (1 computador por dupla) ou em sala de aula com o uso de notebook e datashow, com interação coletiva.
                                </p>

                                <h5>6. Recursos Necessários</h5>
                                <ul>
                                    <li>Computadores com Python instalado (ou ambiente online como Google Colab).</li>
                                    <li>Datashow e notebook (caso não haja laboratório disponível).</li>
                                    <li>Cópias impressas ou digitais do gráfico da curva de aquecimento.</li>
                                    <li>Questionário de fixação.</li>
                                </ul>

                                <h5>7. Proposta de Avaliação</h5>
                                <p>
                                    A avaliação será formativa, baseada na participação nas discussões, na interpretação correta do gráfico da curva de aquecimento e nas respostas ao questionário de fixação.
                                </p>
                                <h6>7.1. Especificação dos Elementos Formais de Avaliação</h6>
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Elemento Avaliado</th>
                                            <th>Critério de Sucesso</th>
                                            <th>Peso (%)</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Participação na discussão</td>
                                            <td>Contribui com ao menos uma interpretação correta ou pergunta relevante</td>
                                            <td>30%</td>
                                        </tr>
                                        <tr>
                                            <td>Interpretação do gráfico</td>
                                            <td>Identifica corretamente os trechos de calor sensível e calor latente</td>
                                            <td>40%</td>
                                        </tr>
                                        <tr>
                                            <td>Questionário de fixação</td>
                                            <td>Acerto de pelo menos 70% das questões</td>
                                            <td>30%</td>
                                        </tr>
                                    </tbody>
                                </table>

                                <h5>8. Sugestões de Leituras Complementares</h5>
                                <ul>
                                    <li>HEWITT, Paul G. Física Conceitual – Capítulo sobre Calor e Temperatura.</li>
                                    <li>HALLIDAY, David; RESNICK, Robert; WALKER, Jearl. Fundamentos de Física – Volume 2 – Tópicos de Termodinâmica.</li>
                                    <li>SERWAY, Raymond A.; JEWETT, John W. Princípios de Física – Seções sobre energia térmica e mudanças de fase.</li>
                                </ul>

                                <h5>9. Referências</h5>
                                <ul>
                                    <li>FERREIRA, Marcello; FILHO, Olavo L. S. Proposta de plano de aula para o ensino de Física. Physicae Organum, Brasília, v. 5, n. 1, p. 39–44, 2019.</li>
                                    <li>HEWITT, Paul G. Física conceitual [recurso eletrônico] / Paul G. Hewitt ; tradução: Trieste Freire Ricci ; revisão técnica: Maria Helena Gravina. – 12. ed. – Porto Alegre: Bookman, 2015.</li>
                                    <li>HALLIDAY, David; RESNICK, Robert; WALKER, Jearl. Fundamentos de Física – Volume 2: Termodinâmica. 8. ed. – Rio de Janeiro: LTC, 2011.</li>
                                </ul>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="javascript-code" role="tabpanel">
                            <div class="mt-4">
                                <h5>Google Colab Notebook</h5>
                                <p>Acesse o código-fonte clicando no link abaixo:</p>

                                <a href="https://colab.research.google.com/drive/1a8VWLDvjRH9lBdDeLKSxIqQtiiaR6In4?usp=sharing" target="_blank" rel="noopener">
                                    <img style="width: 200px; height: auto;" src="https://colab.research.google.com/assets/colab-badge.svg" alt="Abrir no Google Colab" />
                                </a>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="html-code" role="tabpanel">
                            <div class="mt-4">
                                <h5>Exercício:</h5>
                                <p>Determine a quantidade de calor necessária para transformar $20 g$ de gelo à $-30^\circ C$ em $20 g$ de vapor d’água à $120^\circ C$.</p>
                                <p>
                                    Dados: <br>
                                    Calor específico do gelo: $0,5 cal/g \cdot^\circ C$ <br>
                                    Calor latente de fusão: $80 cal/g$ <br>
                                    Calor específico da água: $1,0 cal/g \cdot^\circ C$ <br>
                                    Calor latente de vaporização: $540 cal/g$ <br>
                                    Calor específico do vapor d'água: $0,5 cal/g \cdot^\circ C$ 
                                </p>
                                <p>Faça os calculos em calorias e no final converta para Joules $(1 cal = 4,18 J)$ e verifique no gráfico os resultados.</p>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>
{% endblock %}

{% block extra_js %}

{% endblock %}